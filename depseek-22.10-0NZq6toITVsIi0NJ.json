{"createdAt":"2025-10-21T20:41:34.576Z","updatedAt":"2025-10-31T14:12:47.890Z","id":"0NZq6toITVsIi0NJ","name":"DEPSEEK 22.10","active":false,"isArchived":true,"nodes":[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[-784,384],"id":"b38fd168-ca50-4168-b8ca-33927b443e69","name":"Telegram Trigger","webhookId":"7f69fb95-d4a3-4e62-a0cd-5fb471d25776","notesInFlow":true,"credentials":{"telegramApi":{"id":"3Y0EmfIA5QQHKmrZ","name":"gpt4autogenerate"}}},{"parameters":{"resource":"assistant","operation":"create","modelId":{"__rl":true,"value":"gpt-4.1-mini","mode":"list","cachedResultName":"GPT-4.1-MINI"},"name":"Codex","description":"=–°—Ç–≤–æ—Ä—é—î—à —Å–∞–π—Ç –∑–∞ –¢–ó {{ $json.message.text }}\n","instructions":"=You are Codex, an AI coding assistant.\nRespond only with clean, concise code unless the user asks for explanation.\nTask: {{ $json.message.text }}\n","options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[928,-128],"id":"242b35c8-f4e0-41c7-af5f-a255252b8d28","name":"Create an assistant","credentials":{"openAiApi":{"id":"CktYcGgmw286vTYY","name":"OpenAi account 4"}}},{"parameters":{"operation":"sendDocument","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","binaryData":true,"additionalFields":{"caption":"=üéâ –í–∞—à —Å–∞–π—Ç –≥–æ—Ç–æ–≤–∏–π!\n\n‚úÖ –£—Å—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ\nüì¶ –ê—Ä—Ö—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω–æ\n\n{{ $json.totalFiles }}"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1520,384],"id":"f8837991-6a89-4725-ac12-01f17016fce6","name":"Send a document","webhookId":"eefc57e3-ffad-4ab5-ad64-0d1fe52076fd","credentials":{"telegramApi":{"id":"3Y0EmfIA5QQHKmrZ","name":"gpt4autogenerate"}}},{"parameters":{"method":"POST","url":"https://api.deepseek.com/chat/completions","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"deepseek-chat\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"You are an expert web developer. Create a complete, modern HTML5 page with embedded CSS. Use a professional, clean design with a cohesive color scheme. Include responsive design (mobile-friendly). Return ONLY the HTML code, no explanations.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"Create {{ $json.indexPage.filename }} for a website about: {{ $json.originalPrompt }}\\n\\nPage details:\\nTitle: {{ $json.indexPage.title }}\\nDescription: {{ $json.indexPage.description }}\\n\\nRequirements:\\n- Modern, professional design\\n- Embedded CSS in <style> tags\\n- Responsive layout\\n- Navigation menu with links to: about.html, services.html, portfolio.html, team.html, contact.html\\n- Hero section, features section, CTA section\\n- Footer with social links\"\n    }\n  ],\n  \"temperature\": 0.7,\n  \"stream\": false\n}","options":{"timeout":3500000}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[64,352],"id":"9182b7c5-560a-424a-b34b-17c59ec87159","name":"HTTP Request","credentials":{"httpHeaderAuth":{"id":"UtDH17p9tLDS7nc3","name":"DEEPSEEC"}}},{"parameters":{"resource":"repository","operation":"get","owner":{"__rl":true,"value":"https://github.com/vlad13371337/CODEX","mode":"url"},"repository":{"__rl":true,"value":"CODEX","mode":"list","cachedResultName":"CODEX","cachedResultUrl":"https://github.com/vlad13371337/CODEX"}},"type":"n8n-nodes-base.github","typeVersion":1.1,"position":[976,784],"id":"344dff12-6f59-4ec0-936a-1257a4aba340","name":"Get a repository","webhookId":"a7aa257e-2463-4e2e-aee6-66cee38385ec","credentials":{"githubApi":{"id":"yPwti6pBURNZJcrM","name":"Codex"}}},{"parameters":{"operation":"compress","binaryPropertyName":"={{ Object.keys($binary).join(',') }}","fileName":"website.zip"},"type":"n8n-nodes-base.compression","typeVersion":1.1,"position":[1248,144],"id":"d895b40e-d045-41eb-9440-ee8234de2b0c","name":"Compression"},{"parameters":{"batchSize":"=#!/bin/bash\n\n# –°—Ç–≤–æ—Ä—é—î–º–æ –ø–∞–ø–∫—É —è–∫—â–æ –Ω–µ–º–∞—î\nFOLDER=\"/tmp/website_build\"\nmkdir -p \"$FOLDER\"\n\n# –ó–∞–ø–∏—Å—É—î–º–æ —Ñ–∞–π–ª\ncat > \"$FOLDER/{{$json.path}}\" << 'ENDOFFILE'\n{{$json.content}}\nENDOFFILE\n\necho \"Created: {{$json.path}}\"\n","options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[160,-384],"id":"0517f3fb-e2a8-4ce1-9da8-4c670060730f","name":"Loop Over Items"},{"parameters":{},"type":"n8n-nodes-base.noOp","name":"Replace Me","typeVersion":1,"position":[480,-368],"id":"c0fd9e0e-a76f-4562-9014-4aa45dd0e258"},{"parameters":{"command":"=#!/bin/bash\n\n# –®–ª—è—Ö –¥–æ —Ñ–∞–π–ª—É –≤ AI Drive\nFILE_PATH=\"{{$json.output}}\"\n\n# –í–∏–≤–æ–¥–∏–º–æ —à–ª—è—Ö –¥–ª—è –¥–æ—Å—Ç—É–ø—É\necho \"File saved: $FILE_PATH\"\necho \"Access via AI Drive web interface\"\n\n# –í–∏–≤–æ–¥–∏–º–æ –¥–ª—è n8n\necho \"$FILE_PATH\"\n"},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[704,-128],"id":"104c0630-a88a-422b-abfc-b04f6e4090a9","name":"Bash \"Get AI Drive URL\""},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[-48,-336],"id":"c2ebc566-ed39-4238-810f-1fdbaeb20924","name":"Aggregate"},{"parameters":{"jsCode":"// –û—Ç—Ä–∏–º—É—î–º–æ —Ç–µ–∫—Å—Ç –∑ –ü–ï–†–®–û–á –Ω–æ–¥–∏ Telegram (—è–∫–∞ –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è)\nconst telegramText = $('Telegram Trigger').item.json.message.text;\n\n// –û—Ç—Ä–∏–º—É—î–º–æ –≤—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ\nconst inputData = $input.all();\n\n// –û–±—Ä–æ–±–ª—è—î–º–æ –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç\nconst output = inputData.map(item => {\n  // –í–∏—Ç—è–≥—É—î–º–æ —Ç–µ–∫—Å—Ç –∑ —Ä—ñ–∑–Ω–∏—Ö –º–æ–∂–ª–∏–≤–∏—Ö –¥–∂–µ—Ä–µ–ª\n  // –ü–†–Ü–û–†–ò–¢–ï–¢: —Å–ø–æ—á–∞—Ç–∫—É Telegram Trigger (–ø–µ—Ä—à–∞ –Ω–æ–¥–∞), –ø–æ—Ç—ñ–º –∑ –ø–æ—Ç–æ—á–Ω–æ–≥–æ item\n  let text = telegramText || \n             item.json.message?.text || \n             item.json.text || \n             item.json.query || \n             item.json.prompt || \n             '';\n  \n  // –ù–æ—Ä–º–∞–ª—ñ–∑—É—î–º–æ —Ç–µ–∫—Å—Ç:\n  // 1. –í–∏–¥–∞–ª—è—î–º–æ –∑–∞–π–≤—ñ –ø—Ä–æ–±—ñ–ª–∏ —Ç–∞ —Ç–∞–±—É–ª—è—Ü—ñ—ó\n  // 2. –ó–∞–º—ñ–Ω—é—î–º–æ –ø–µ—Ä–µ–Ω–æ—Å–∏ —Ä—è–¥–∫—ñ–≤ –Ω–∞ –ø—Ä–æ–±—ñ–ª–∏\n  // 3. –ü—Ä–∏–±–∏—Ä–∞—î–º–æ –º–Ω–æ–∂–∏–Ω–Ω—ñ –ø—Ä–æ–±—ñ–ª–∏\n  const normalizedText = text\n    .replace(/\\r\\n/g, ' ')     // Windows –ø–µ—Ä–µ–Ω–æ—Å–∏ ‚Üí –ø—Ä–æ–±—ñ–ª\n    .replace(/\\n/g, ' ')       // Unix –ø–µ—Ä–µ–Ω–æ—Å–∏ ‚Üí –ø—Ä–æ–±—ñ–ª\n    .replace(/\\r/g, ' ')       // Mac –ø–µ—Ä–µ–Ω–æ—Å–∏ ‚Üí –ø—Ä–æ–±—ñ–ª\n    .replace(/\\t/g, ' ')       // –¢–∞–±—É–ª—è—Ü—ñ—ó ‚Üí –ø—Ä–æ–±—ñ–ª\n    .replace(/\\s+/g, ' ')      // –ú–Ω–æ–∂–∏–Ω–Ω—ñ –ø—Ä–æ–±—ñ–ª–∏ ‚Üí –æ–¥–∏–Ω –ø—Ä–æ–±—ñ–ª\n    .trim();                    // –í–∏–¥–∞–ª—è—î–º–æ –ø—Ä–æ–±—ñ–ª–∏ –Ω–∞ –ø–æ—á–∞—Ç–∫—É/–∫—ñ–Ω—Ü—ñ\n  \n  console.log(\"=== TEXT NORMALIZER ===\");\n  console.log(\"Telegram Text (1st node):\", telegramText);\n  console.log(\"Original:\", text);\n  console.log(\"Normalized:\", normalizedText);\n  \n  // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –æ–±—Ä–æ–±–ª–µ–Ω—ñ –¥–∞–Ω—ñ\n  return {\n    json: {\n      ...item.json,\n      message: {\n        ...item.json.message,\n        text: normalizedText\n      },\n      text: normalizedText,\n      query: normalizedText,\n      prompt: normalizedText,\n      normalized_text: normalizedText, // –¥–æ–¥–∞—Ç–∫–æ–≤–µ –ø–æ–ª–µ\n      telegram_source: telegramText    // –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª –∑ Telegram\n    }\n  };\n});\n\nreturn output;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-512,384],"id":"bb1f4469-28c0-4548-bf09-0eeb3f4bc062","name":"Code in JavaScript1"},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"=üöÄ <b>–í–∑—è–≤ –≤ —Ä–æ–±–æ—Ç—É!</b>  \n‚è±Ô∏è <b>–û—á—ñ–∫—É–≤–∞–Ω–∏–π —á–∞—Å: 10-15 —Ö–≤–∏–ª–∏–Ω</b>  \n<b>–ó–∞—á–µ–∫–∞–π—Ç–µ, –±—É–¥—å –ª–∞—Å–∫–∞</b> ‚òï","additionalFields":{"parse_mode":"HTML"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[-640,176],"id":"189070ca-37ab-448b-aec5-c2e93ba7889f","name":"Send a text message","webhookId":"fe8c575b-d26e-49de-b59d-8433c218a88b","notesInFlow":true,"credentials":{"telegramApi":{"id":"3Y0EmfIA5QQHKmrZ","name":"gpt4autogenerate"}}},{"parameters":{"chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"‚úÖ <b>–ï—Ç–∞–ø 1/3 –∑–∞–≤–µ—Ä—à–µ–Ω–æ</b> üìù <b>–°—Ç–≤–æ—Ä–∏–≤ –ø—Ä–æ–º–ø—Ç –¥–ª—è —Å–∞–π—Ç—É</b>   ‚è≥ <b>–ü–æ—á–∏–Ω–∞—é –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é...</b>","additionalFields":{"parse_mode":"HTML"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[48,784],"id":"4be6df14-abc6-4d11-9bff-afc7b42834d5","name":"Send a text message1","webhookId":"bded5756-6d44-47a9-90ad-ccbef3c39226","notesInFlow":true,"credentials":{"telegramApi":{"id":"xWrzOPc7BVVkxCQ1","name":"CODEX"}}},{"parameters":{"chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"‚úÖ <b>–ï—Ç–∞–ø 2/3</b> üé® <b>–ì–µ–Ω–µ—Ä—É—é HTML —Å—Ç–æ—Ä—ñ–Ω–∫–∏...</b> üíª <b>–¶–µ –∑–∞–π–º–µ 10-15 —Ö–≤–∏–ª–∏–Ω</b>","additionalFields":{"parse_mode":"HTML"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[192,784],"id":"af7590fe-8575-49f8-9a9e-e502440c1b68","name":"Send a text message2","webhookId":"bded5756-6d44-47a9-90ad-ccbef3c39226","retryOnFail":false,"executeOnce":false,"notesInFlow":true,"credentials":{"telegramApi":{"id":"xWrzOPc7BVVkxCQ1","name":"CODEX"}}},{"parameters":{"method":"POST","url":"https://api.deepseek.com/chat/completions","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":" application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"deepseek-chat\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"You are a web architect. Create a JSON structure for a multi-page website with 8 pages: index.html, about.html, services.html, portfolio.html, team.html, contact.html, legal.html, faq.html. Return ONLY valid JSON with this structure: {\\\"pages\\\": [{\\\"filename\\\": \\\"index.html\\\", \\\"title\\\": \\\"...\\\", \\\"description\\\": \\\"...\\\"}]}\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"{{ $json.message.text }}\"\n    }\n  ],\n  \"temperature\": 0.7,\n  \"stream\": false\n}","options":{"timeout":2500000}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-368,176],"id":"e914bf15-2e55-4047-8df5-1629417cd7df","name":"–ù–û–î–ê 1","executeOnce":false,"alwaysOutputData":false,"credentials":{"httpHeaderAuth":{"id":"UtDH17p9tLDS7nc3","name":"DEEPSEEC"}}},{"parameters":{"jsCode":"// –ù–û–î–ê 2: –í–∏—Ç—è–≥—É—î–º–æ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–∞–π—Ç—É –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ DeepSeek\n\nconst response = items[0].json;\n\n// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞\nif (!response || !response.choices || !response.choices[0]) {\n  throw new Error('–ù–û–î–ê 2: –ù–µ–≤–∞–ª—ñ–¥–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ DeepSeek');\n}\n\n// –í–∏—Ç—è–≥—É—î–º–æ –∫–æ–Ω—Ç–µ–Ω—Ç\nconst content = response.choices[0].message.content;\n\n// –í–∏–¥–∞–ª—è—î–º–æ markdown –±–ª–æ–∫–∏ ```json...```\nconst cleaned = content.replace(/```json\\n?|\\n?```/g, '').trim();\n\nconsole.log('‚úÖ –ù–û–î–ê 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∞–π—Ç—É –æ—Ç—Ä–∏–º–∞–Ω–∞');\nconsole.log('üìÑ JSON –¥–æ–≤–∂–∏–Ω–∞:', cleaned.length);\n\nreturn [{\n  json: {\n    structure: cleaned,\n    originalPrompt: '–†–µ–∫–ª–∞–º–Ω–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ YBK –≤ –•–∞—Ä–∫–æ–≤—ñ'\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-208,368],"id":"73b69f8f-5edf-48d0-86b3-c399473f8ee5","name":"–ù–û–î–ê 2"},{"parameters":{"jsCode":"// –ù–û–î–ê 3: –ó–Ω–∞—Ö–æ–¥–∏–º–æ index.html –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ —ñ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –≤—Å—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏\n\nconst structureText = items[0].json.structure;\n\nif (!structureText) {\n  throw new Error('–ù–û–î–ê 3: structure –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –ü–µ—Ä–µ–≤—ñ—Ä –ù–û–î–£ 2!');\n}\n\n// –ü–∞—Ä—Å–∏–º–æ JSON\nconst structure = JSON.parse(structureText);\n\nconsole.log('üìÑ –ù–û–î–ê 3: –ó–Ω–∞–π–¥–µ–Ω–æ —Å—Ç–æ—Ä—ñ–Ω–æ–∫:', structure.pages.length);\n\n// –ó–Ω–∞—Ö–æ–¥–∏–º–æ index.html\nconst indexPage = structure.pages.find(p => p.filename === 'index.html');\n\nif (!indexPage) {\n  throw new Error('–ù–û–î–ê 3: index.html –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ!');\n}\n\nconsole.log('‚úÖ –ù–û–î–ê 3: index.html –∑–Ω–∞–π–¥–µ–Ω–æ -', indexPage.title);\n\nreturn [{\n  json: {\n    indexPage: indexPage,\n    allPages: structure.pages,\n    originalPrompt: items[0].json.originalPrompt\n  }\n}];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-64,176],"id":"c454d674-9a4a-4c31-88ec-c04874cb728a","name":"–ù–û–î–ê 3"},{"parameters":{"jsCode":"// –ù–û–î–ê 4: –ü–∞—Ä—Å–∏–Ω–≥ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ HTTP Request + –ø–µ—Ä–µ–¥–∞—á–∞ allPages\n\nconst response = items[0].json;\n\n// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞\nif (!response || !response.choices || !response.choices[0]) {\n  throw new Error('–ù–û–î–ê 4: –ù–µ–≤–∞–ª—ñ–¥–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ DeepSeek');\n}\n\n// –í–∏—Ç—è–≥—É—î–º–æ HTML\nconst htmlContent = response.choices[0].message.content;\nconst cleanedHTML = htmlContent.replace(/```html\\n?|\\n?```/g, '').trim();\n\nconsole.log('‚úÖ –ù–û–î–ê 4: index.html –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ');\nconsole.log('üìÑ HTML –¥–æ–≤–∂–∏–Ω–∞:', cleanedHTML.length);\n\n// ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –û—Ç—Ä–∏–º—É—î–º–æ allPages –∑ –ù–û–î–ò 3\nconst node3Data = $node[\"–ù–û–î–ê 3\"];\n\nif (!node3Data || !node3Data.json) {\n  throw new Error('–ù–û–î–ê 4: –ù–µ –º–æ–∂—É –∑–Ω–∞–π—Ç–∏ –ù–û–î–£ 3!');\n}\n\nconsole.log('‚úÖ allPages –æ—Ç—Ä–∏–º–∞–Ω–æ –∑ –ù–û–î–ò 3:', node3Data.json.allPages.length, '—Å—Ç–æ—Ä—ñ–Ω–æ–∫');\n\n// ‚úÖ –ü–ï–†–ï–î–ê–Ñ–ú–û –í–°–ï –î–ê–õ–Ü\nreturn [{\n  json: {\n    indexHTML: cleanedHTML,\n    allPages: node3Data.json.allPages,              // ‚Üê –¶–ï –ú–ê–Ñ –ë–£–¢–ò!\n    originalPrompt: node3Data.json.originalPrompt   // ‚Üê –Ü –¶–ï!\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[208,144],"id":"519869d1-9549-4ec7-8c09-10a6b541a900","name":"–ù–û–î–ê 4"},{"parameters":{"jsCode":"// –ù–û–î–ê 5: –í–∏—Ç—è–≥—Ç–∏ CSS –∑ index.html\n\nconst html = items[0].json.indexHTML;\n\nif (!html) {\n  throw new Error('–ù–û–î–ê 5: indexHTML –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ');\n}\n\nconsole.log('üìÑ –ù–û–î–ê 5: indexHTML –æ—Ç—Ä–∏–º–∞–Ω–æ, –¥–æ–≤–∂–∏–Ω–∞:', html.length);\n\n// –í–∏—Ç—è–≥—É—î–º–æ CSS\nconst cssMatch = html.match(/<style[^>]*>([\\s\\S]*?)<\\/style>/i);\nconst extractedCSS = cssMatch ? cssMatch[1].trim() : '';\n\nif (!extractedCSS) {\n  throw new Error('–ù–û–î–ê 5: CSS –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ index.html');\n}\n\nconsole.log('‚úÖ –ù–û–î–ê 5: CSS –≤–∏—Ç—è–≥–Ω—É—Ç–æ -', extractedCSS.length, '—Å–∏–º–≤–æ–ª—ñ–≤');\n\n// ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –û—Ç—Ä–∏–º—É—î–º–æ allPages –∑ –ù–û–î–ò 4\nlet allPages = items[0].json.allPages;\nlet originalPrompt = items[0].json.originalPrompt;\n\n// –Ø–∫—â–æ –Ω–µ–º–∞—î - –±–µ—Ä–µ–º–æ –∑ –ù–û–î–ò 3 –Ω–∞–ø—Ä—è–º—É\nif (!allPages) {\n  console.log('‚ö†Ô∏è allPages –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ items. –®—É–∫–∞—é –≤ –ù–û–î–Ü 3...');\n  \n  const node3Data = $node[\"–ù–û–î–ê 3\"];\n  if (node3Data && node3Data.json) {\n    allPages = node3Data.json.allPages;\n    originalPrompt = node3Data.json.originalPrompt;\n    console.log('‚úÖ allPages –∑–Ω–∞–π–¥–µ–Ω–æ –≤ –ù–û–î–Ü 3:', allPages.length, '—Å—Ç–æ—Ä—ñ–Ω–æ–∫');\n  }\n}\n\n// –û—Å—Ç–∞–Ω–Ω—ñ–π –≤–∞—Ä—ñ–∞–Ω—Ç - —Ö–∞—Ä–¥–∫–æ–¥\nif (!allPages || !Array.isArray(allPages)) {\n  console.log('‚ö†Ô∏è allPages –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –Ω—ñ–¥–µ. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é —Ö–∞—Ä–¥–∫–æ–¥.');\n  \n  allPages = [\n    {filename: 'index.html', title: '–ì–æ–ª–æ–≤–Ω–∞', description: '–ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞'},\n    {filename: 'about.html', title: '–ü—Ä–æ –Ω–∞—Å', description: '–ü—Ä–æ –∫–æ–º–ø–∞–Ω—ñ—é YBK'},\n    {filename: 'services.html', title: '–ü–æ—Å–ª—É–≥–∏', description: '–ù–∞—à—ñ –ø–æ—Å–ª—É–≥–∏'},\n    {filename: 'portfolio.html', title: '–ü–æ—Ä—Ç—Ñ–æ–ª—ñ–æ', description: '–ù–∞—à—ñ —Ä–æ–±–æ—Ç–∏'},\n    {filename: 'team.html', title: '–ö–æ–º–∞–Ω–¥–∞', description: '–ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞'},\n    {filename: 'contact.html', title: '–ö–æ–Ω—Ç–∞–∫—Ç–∏', description: '–ó–≤\\'—è–∑–∞—Ç–∏—Å—è –∑ –Ω–∞–º–∏'},\n    {filename: 'legal.html', title: '–ü—Ä–∞–≤–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è', description: 'Legal'},\n    {filename: 'faq.html', title: 'FAQ', description: '–ß–∞—Å—Ç—ñ –ø–∏—Ç–∞–Ω–Ω—è'}\n  ];\n  originalPrompt = '–†–µ–∫–ª–∞–º–Ω–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ YBK –≤ –•–∞—Ä–∫–æ–≤—ñ';\n}\n\n// –§—ñ–ª—å—Ç—Ä—É—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (–±–µ–∑ index.html)\nconst remainingPages = allPages.filter(p => p.filename !== 'index.html');\n\nconsole.log('üìÑ –ù–û–î–ê 5: –°—Ç–æ—Ä—ñ–Ω–æ–∫ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó:', remainingPages.length);\nremainingPages.forEach(p => console.log('   -', p.filename));\n\n// ‚úÖ –ü–ï–†–ï–î–ê–Ñ–ú–û –í–°–ï –î–ê–õ–Ü\nreturn [{\n  json: {\n    unifiedCSS: extractedCSS,\n    indexHTML: html,\n    remainingPages: remainingPages,\n    allPages: allPages,  // ‚Üê –ù–∞ –≤—Å—è–∫ –≤–∏–ø–∞–¥–æ–∫\n    originalPrompt: originalPrompt\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[336,352],"id":"08a14ac4-a7e5-445a-bb75-89dd7cba5d86","name":"–ù–û–î–ê 5"},{"parameters":{"jsCode":"// –ù–û–î–ê 6: –í–∏—Ç—è–≥—É—î–º–æ CSS –∑ index.html –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ —ñ–Ω—à–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö\n\nconst html = items[0].json.indexHTML;\n\nif (!html) {\n  throw new Error('–ù–û–î–ê 6: indexHTML –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –ü–µ—Ä–µ–≤—ñ—Ä –ù–û–î–£ 5!');\n}\n\n// –í–∏—Ç—è–≥—É—î–º–æ CSS –∑ <style>...</style>\nconst cssMatch = html.match(/<style[^>]*>([\\s\\S]*?)<\\/style>/i);\nconst extractedCSS = cssMatch ? cssMatch[1].trim() : '';\n\nif (!extractedCSS) {\n  throw new Error('–ù–û–î–ê 6: CSS –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ index.html!');\n}\n\n// –û—Ç—Ä–∏–º—É—î–º–æ allPages\nconst allPages = items[0].json.allPages;\n\nif (!allPages || !Array.isArray(allPages)) {\n  throw new Error('–ù–û–î–ê 6: allPages –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –ü–µ—Ä–µ–≤—ñ—Ä –ù–û–î–£ 5!');\n}\n\n// –§—ñ–ª—å—Ç—Ä—É—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (–±–µ–∑ index.html)\nconst remainingPages = allPages.filter(p => p.filename !== 'index.html');\n\nconsole.log('‚úÖ –ù–û–î–ê 6: CSS –≤–∏—Ç—è–≥–Ω—É—Ç–æ -', extractedCSS.length, '—Å–∏–º–≤–æ–ª—ñ–≤');\nconsole.log('üìÑ –ù–û–î–ê 6: –°—Ç–æ—Ä—ñ–Ω–æ–∫ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó:', remainingPages.length);\nremainingPages.forEach(p => console.log('   -', p.filename));\n\nreturn [{\n  json: {\n    unifiedCSS: extractedCSS,\n    indexHTML: html,\n    remainingPages: remainingPages,\n    originalPrompt: items[0].json.originalPrompt\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[448,144],"id":"539b2401-eef0-4436-a813-b73800c2c8a6","name":"–ù–û–î–ê 6"},{"parameters":{"jsCode":"// –ù–û–î–ê 7: –°—Ç–≤–æ—Ä—é—î–º–æ –æ–∫—Ä–µ–º–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –∫–æ–∂–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑ CSS\n\nconst css = items[0].json.unifiedCSS;\nconst pages = items[0].json.remainingPages;\nconst prompt = items[0].json.originalPrompt;\n\nconsole.log('üìù –ù–û–î–ê 7: –°—Ç–≤–æ—Ä—é—î–º–æ', pages.length, '–ø—Ä–æ–º–ø—Ç—ñ–≤');\n\n// –°—Ç–≤–æ—Ä—é—î–º–æ –æ–∫—Ä–µ–º–∏–π item –¥–ª—è –∫–æ–∂–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏\nreturn pages.map(page => {\n  console.log('   ‚úÖ', page.filename);\n  \n  return {\n    json: {\n      filename: page.filename,\n      title: page.title,\n      description: page.description,\n      unifiedCSS: css,\n      originalPrompt: prompt\n    }\n  };\n});"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[592,384],"id":"cfb146a4-887a-463e-8017-e0698e9305dc","name":"–ù–û–î–ê 7"},{"parameters":{"method":"POST","url":"https://api.deepseek.com/chat/completions","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":" application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={{\n  {\n    \"model\": \"deepseek-chat\",\n    \"messages\": [\n      {\n        \"role\": \"system\",\n        \"content\": \"You are an expert web developer. Create HTML pages that match an existing design. Use the provided CSS exactly as given. Return ONLY the HTML code.\"\n      },\n      {\n        \"role\": \"user\",\n        \"content\": \"Create \" + $json.filename + \" for: \" + $json.originalPrompt + \"\\n\\nTitle: \" + $json.title + \"\\nDescription: \" + $json.description + \"\\n\\n**USE THIS EXACT CSS:**\\n<style>\\n\" + $json.unifiedCSS + \"\\n</style>\\n\\nRequirements:\\n- Use the CSS above without changes\\n- Match the design style\\n- Include navigation menu\\n- Create appropriate content\\n- Add footer\"\n      }\n    ],\n    \"temperature\": 0.7,\n    \"stream\": false\n  }\n}}","options":{"timeout":2500000}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[720,144],"id":"0250ca9c-f61e-4eb3-88e7-403b766e0522","name":"–ù–û–î–ê 8","executeOnce":false,"alwaysOutputData":false,"credentials":{"httpHeaderAuth":{"id":"UtDH17p9tLDS7nc3","name":"DEEPSEEC"}}},{"parameters":{"jsCode":"// –ù–û–î–ê 9: –ü–∞—Ä—Å–∏–º–æ –≤—Å—ñ 7 –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫\n\nconsole.log('üì¶ –ù–û–î–ê 9: –û–±—Ä–æ–±–∫–∞', items.length, '—Å—Ç–æ—Ä—ñ–Ω–æ–∫');\n\n// –û–±—Ä–æ–±–ª—è—î–º–æ –∫–æ–∂–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å DeepSeek\nconst processedPages = items.map((item, index) => {\n  const htmlContent = item.json.choices[0].message.content;\n  const cleaned = htmlContent.replace(/```html\\n?|\\n?```/g, '').trim();\n  \n  // Filename –∑ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É (—è–∫—â–æ —î)\n  const filename = item.json.filename || `page${index}.html`;\n  \n  console.log('   ‚úÖ', filename, '-', cleaned.length, '—Å–∏–º–≤–æ–ª—ñ–≤');\n  \n  return {\n    filename: filename,\n    content: cleaned\n  };\n});\n\nreturn [{\n  json: {\n    generatedPages: processedPages\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[848,384],"id":"a2081c3d-6f42-4674-9f02-39da8e4ac03a","name":"–ù–û–î–ê 9"},{"parameters":{"jsCode":"// –ù–û–î–ê 10: –û–±'—î–¥–Ω—É—î–º–æ index.html + —Ä–µ—à—Ç–∞ 7 —Å—Ç–æ—Ä—ñ–Ω–æ–∫\n\n// –û—Ç—Ä–∏–º—É—î–º–æ index.html –∑ –ù–û–î–ò 6\nconst node6Data = $node[\"–ù–û–î–ê 6\"];\n\nif (!node6Data || !node6Data.json) {\n  throw new Error('–ù–û–î–ê 10: –ù–µ –º–æ–∂—É –∑–Ω–∞–π—Ç–∏ –¥–∞–Ω—ñ –∑ –ù–û–î–ò 6. –ü–µ—Ä–µ–≤—ñ—Ä –Ω–∞–∑–≤—É –Ω–æ–¥–∏!');\n}\n\nconst indexHTML = node6Data.json.indexHTML;\n\n// –û—Ç—Ä–∏–º—É—î–º–æ —Ä–µ—à—Ç—É —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –∑ –ù–û–î–ò 9\nconst otherPages = items[0].json.generatedPages;\n\nconsole.log('üèóÔ∏è –ù–û–î–ê 10: –ó–±—ñ—Ä–∫–∞ –≤–µ–±-—Å–∞–π—Ç—É');\nconsole.log('   ‚úÖ index.html');\n\n// –û–±'—î–¥–Ω—É—î–º–æ –≤—Å—ñ 8 —Å—Ç–æ—Ä—ñ–Ω–æ–∫\nconst allPages = [\n  {\n    filename: 'index.html',\n    content: indexHTML\n  },\n  ...otherPages\n];\n\nconsole.log('‚úÖ –ù–û–î–ê 10: –í—Å—å–æ–≥–æ —Å—Ç–æ—Ä—ñ–Ω–æ–∫:', allPages.length);\nallPages.forEach(p => console.log('   -', p.filename));\n\nreturn [{\n  json: {\n    website: {\n      pages: allPages,\n      total: allPages.length\n    }\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[976,144],"id":"41496395-06de-44c8-b24b-7d6b7b7ca8d2","name":"–ù–û–î–ê 10"},{"parameters":{"jsCode":"// –ù–û–î–ê 11: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª—ñ–≤ –¥–ª—è Compression (–¥–ª—è DeepSeek workflow)\n\nconst websiteData = items[0].json.website;\n\nif (!websiteData || !websiteData.pages) {\n  throw new Error('–ù–û–î–ê 11: –ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ website.pages. –ü–µ—Ä–µ–≤—ñ—Ä –ù–û–î–£ 10!');\n}\n\nconsole.log(`üì§ –ù–û–î–ê 11: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ ${websiteData.pages.length} —Ñ–∞–π–ª—ñ–≤ –≤ –û–î–ò–ù item`);\n\nconst binaryData = {};\nconst binaryFieldNames = [];\n\nfor (let i = 0; i < websiteData.pages.length; i++) {\n  const page = websiteData.pages[i];\n  const contentBuffer = Buffer.from(page.content, 'utf-8');\n  const fieldName = `file${i}`;\n  \n  binaryData[fieldName] = {\n    data: contentBuffer.toString('base64'),\n    mimeType: 'text/html',\n    fileName: page.filename  // ‚Üê index.html, about.html —ñ —Ç.–¥.\n  };\n  \n  binaryFieldNames.push(fieldName);\n  console.log(`   ‚úÖ ${fieldName} ‚Üí ${page.filename}`);\n}\n\nconsole.log(`‚úÖ –ù–û–î–ê 11: Binary fields —Å—Ç–≤–æ—Ä–µ–Ω–æ: ${binaryFieldNames.join(', ')}`);\nconsole.log(`üìã –î–ª—è Compression –Ω–∞–ø–∏—à–∏: ${binaryFieldNames.join(',')}`);\n\nreturn [{\n  json: {\n    totalFiles: websiteData.pages.length,\n    binaryFields: binaryFieldNames.join(',')  // ‚Üê –°–ö–û–ü–Ü–Æ–ô –¶–ï –ó–ù–ê–ß–ï–ù–ù–Ø!\n  },\n  binary: binaryData\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1120,384],"id":"010eb30a-9be3-4c16-8130-c5323afaec85","name":"–ù–û–î–ê 11"}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"–ù–û–î–ê 4","type":"main","index":0}]]},"Compression":{"main":[[{"node":"Send a document","type":"main","index":0}]]},"Loop Over Items":{"main":[[],[{"node":"Replace Me","type":"main","index":0}]]},"Replace Me":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Code in JavaScript1":{"main":[[{"node":"–ù–û–î–ê 1","type":"main","index":0}]]},"Send a text message":{"main":[[{"node":"Code in JavaScript1","type":"main","index":0}]]},"Send a text message1":{"main":[[{"node":"Send a text message2","type":"main","index":0}]]},"Send a text message2":{"main":[[]]},"–ù–û–î–ê 1":{"main":[[{"node":"–ù–û–î–ê 2","type":"main","index":0}]]},"–ù–û–î–ê 2":{"main":[[{"node":"–ù–û–î–ê 3","type":"main","index":0}]]},"–ù–û–î–ê 3":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"–ù–û–î–ê 4":{"main":[[{"node":"–ù–û–î–ê 5","type":"main","index":0}]]},"–ù–û–î–ê 5":{"main":[[{"node":"–ù–û–î–ê 6","type":"main","index":0}]]},"–ù–û–î–ê 6":{"main":[[{"node":"–ù–û–î–ê 7","type":"main","index":0}]]},"–ù–û–î–ê 7":{"main":[[{"node":"–ù–û–î–ê 8","type":"main","index":0}]]},"–ù–û–î–ê 8":{"main":[[{"node":"–ù–û–î–ê 9","type":"main","index":0}]]},"–ù–û–î–ê 9":{"main":[[{"node":"–ù–û–î–ê 10","type":"main","index":0}]]},"–ù–û–î–ê 10":{"main":[[{"node":"–ù–û–î–ê 11","type":"main","index":0}]]},"–ù–û–î–ê 11":{"main":[[{"node":"Compression","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"c58a2f45-bfa5-4757-a21e-8af2bac4a728","triggerCount":0,"shared":[{"createdAt":"2025-10-21T20:41:34.576Z","updatedAt":"2025-10-21T20:41:34.576Z","role":"workflow:owner","workflowId":"0NZq6toITVsIi0NJ","projectId":"nX80NbTFpj6pvsnR"}],"tags":[]}