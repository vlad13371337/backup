{"createdAt":"2025-11-11T13:38:00.763Z","updatedAt":"2025-11-12T11:30:48.248Z","id":"jxqa3KX3WDWVUaup","name":"react back","active":false,"isArchived":false,"nodes":[{"parameters":{"inputSource":"passthrough"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-144,-32],"id":"7dc93319-4bd9-4c82-906b-83133ed8e270","name":"When Executed by Another Workflow","alwaysOutputData":true,"executeOnce":false},{"parameters":{"chatId":"={{ $input.first().json.userId }}\"","text":"=üé® *–û—Ç–ª–∏—á–Ω–æ! –í–∞—à –∑–∞–ø—Ä–æ—Å –ø—Ä–∏–Ω—è—Ç.*\n\nüìä *–°–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –¥–∏–∑–∞–π–Ω–∞ –≤–∞–º —Å–æ–∑–¥–∞—Ç—å?*\n\n–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ:","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"1","additionalFields":{"callback_data":"count_1"}},{"text":"3","additionalFields":{"callback_data":"count_3"}}]}},{"row":{"buttons":[{"text":"5","additionalFields":{"callback_data":"count_5"}},{"text":"10","additionalFields":{"callback_data":"count_10"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[256,-272],"id":"ed9f5a9e-75a9-482a-b8ea-15a978efe485","name":"Send a text message2","webhookId":"0aabbae9-35e9-4f9b-971d-8c436c3954bb","credentials":{"telegramApi":{"id":"8vAyhXb2m8DaonMu","name":"react2_test"}}},{"parameters":{"jsCode":"// \"Debug Input\" - –º–µ–∂–¥—É —Ç—Ä–∏–≥–≥–µ—Ä–æ–º –∏ Telegram –Ω–æ–¥–æ–π\nconsole.log('=== WORKFLOW 2 INPUT ===');\nconsole.log(JSON.stringify($input.first().json, null, 2));\nreturn $input.all();"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[64,-32],"id":"b77ae0e2-e430-4e7a-bc28-623189b65b70","name":"Code in JavaScript"},{"parameters":{"operation":"sendAndWait","chatId":"={{ $input.first().json.userId }}","message":"üé® *–û—Ç–ª–∏—á–Ω–æ! –í–∞—à –∑–∞–ø—Ä–æ—Å –ø—Ä–∏–Ω—è—Ç.*\\n\\nüìä *–°–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –¥–∏–∑–∞–π–Ω–∞ –≤–∞–º —Å–æ–∑–¥–∞—Ç—å?*\\n\\n–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ —Ü–∏—Ñ—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: 1, 3, 5, 10):","responseType":"freeText","options":{"appendAttribution":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[288,-32],"id":"f4221f8c-6893-42df-ab86-2298debe9406","name":"Send message and wait for response","webhookId":"91c80e18-7d35-446b-9b27-d963b2a55f1f","alwaysOutputData":true,"credentials":{"telegramApi":{"id":"8vAyhXb2m8DaonMu","name":"react2_test"}}},{"parameters":{"jsCode":"// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–∞–π—Ç–æ–≤\nconst inputData = $input.first().json;\n\nconsole.log('=== USER RESPONSE DATA ===');\nconsole.log(JSON.stringify(inputData, null, 2));\n\n// –î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ: { \"data\": { \"text\": \"3\" } }\nconst userText = inputData.data?.text || '1';\n\nconsole.log('User response:', userText);\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º —á–∏—Å–ª–æ –∏–∑ –æ—Ç–≤–µ—Ç–∞\nconst websiteCount = parseInt(userText.trim()) || 1;\n\n// –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ\nconst finalCount = Math.min(Math.max(websiteCount, 1), 10);\n\nconsole.log(`‚úÖ User selected: ${finalCount} websites`);\n\n// –ü–æ–ª—É—á–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –≤–æ—Ä–∫—Ñ–ª–æ—É\n// –û–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ $input\nconst originalData = $input.first().json;\n\nreturn [{\n  json: {\n    websiteCount: finalCount,\n    userResponse: userText,\n    userId: originalData.userId,        // –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –≤–æ—Ä–∫—Ñ–ª–æ—É\n    chatId: originalData.chatId,        // –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –≤–æ—Ä–∫—Ñ–ª–æ—É  \n    originalPrompt: originalData.originalPrompt  // –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –≤–æ—Ä–∫—Ñ–ª–æ—É\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[688,-32],"id":"8f8d9c5b-02b2-4954-a078-5fdedb4b0488","name":"Send and Wait for Response"},{"parameters":{"jsCode":"// Debug - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ\nconsole.log('=== RAW RESPONSE FROM SEND AND WAIT ===');\nconsole.log(JSON.stringify($input.first().json, null, 2));\nreturn $input.all();"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[496,-32],"id":"a0b7380a-2101-42e9-84cf-6c81e8a7199c","name":"debug"}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"Code in JavaScript","type":"main","index":0}]]},"Send a text message2":{"main":[[]]},"Code in JavaScript":{"main":[[{"node":"Send message and wait for response","type":"main","index":0}]]},"Send message and wait for response":{"main":[[{"node":"debug","type":"main","index":0}]]},"Send and Wait for Response":{"main":[[]]},"debug":{"main":[[{"node":"Send and Wait for Response","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"bcbaff73-15fd-4e6f-a3f9-15d33bb7c29d","triggerCount":0,"shared":[{"createdAt":"2025-11-11T13:38:00.763Z","updatedAt":"2025-11-11T13:38:00.763Z","role":"workflow:owner","workflowId":"jxqa3KX3WDWVUaup","projectId":"nX80NbTFpj6pvsnR"}],"tags":[]}