{"createdAt":"2025-10-22T12:49:49.257Z","updatedAt":"2025-10-27T11:34:54.493Z","id":"3S4aKdehjHYDz8lA","name":"My workflow 22","active":false,"isArchived":true,"nodes":[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[-672,640],"id":"ee99451c-daf6-4028-b6b3-2e3e6c20b061","name":"Telegram Trigger","webhookId":"7f69fb95-d4a3-4e62-a0cd-5fb471d25776","notesInFlow":true,"credentials":{"telegramApi":{"id":"JTxYpt4Hdl7KKsLn","name":"@popalamarama_bot"}}},{"parameters":{"resource":"assistant","operation":"create","modelId":{"__rl":true,"value":"gpt-4.1-mini","mode":"list","cachedResultName":"GPT-4.1-MINI"},"name":"Codex","description":"=–°—Ç–≤–æ—Ä—é—î—à —Å–∞–π—Ç –∑–∞ –¢–ó {{ $json.message.text }}\n","instructions":"=You are Codex, an AI coding assistant.\nRespond only with clean, concise code unless the user asks for explanation.\nTask: {{ $json.message.text }}\n","options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[1040,128],"id":"99a12fa6-64a2-427d-8cc2-83ff95a80e8b","name":"Create an assistant","credentials":{"openAiApi":{"id":"CktYcGgmw286vTYY","name":"OpenAi account 4"}}},{"parameters":{"operation":"sendDocument","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","binaryData":true,"additionalFields":{"caption":"=üéâ –í–∞—à —Å–∞–π—Ç –≥–æ—Ç–æ–≤–∏–π!\n\n‚úÖ –£—Å—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ\nüì¶ –ê—Ä—Ö—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω–æ\n\n{{ $json.totalFiles }}"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1632,640],"id":"2ae207fe-a848-4401-b44c-f61225293ebf","name":"Send a document","webhookId":"eefc57e3-ffad-4ab5-ad64-0d1fe52076fd","credentials":{"telegramApi":{"id":"3Y0EmfIA5QQHKmrZ","name":"gpt4autogenerate"}}},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/responses","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"gpt-5-codex\",\n  \"input\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"You are an expert web developer. Create a complete, modern HTML5 page with embedded CSS. Use a professional, clean design with a cohesive color scheme. Include responsive design (mobile-friendly). Return ONLY the HTML code, no explanations.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"Create {{ $json.indexPage.filename }} for a website about: {{ $json.originalPrompt }}\\n\\nPage details:\\nTitle: {{ $json.indexPage.title }}\\nDescription: {{ $json.indexPage.description }}\\n\\nRequirements:\\n- Modern, professional design\\n- Embedded CSS in <style> tags\\n- Responsive layout\\n- Navigation menu with links to: about.html, services.html, portfolio.html, team.html, contact.html\\n- Hero section, features section, CTA section\\n- Footer with social links\"\n    }\n  ]\n}\n","options":{"timeout":3500000}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[176,608],"id":"711efed9-9f0c-4d32-9a6f-5ae5de93ab6c","name":"HTTP Request","credentials":{"httpHeaderAuth":{"id":"akk2Sns1ZGHCFsnS","name":"CODEX-ASS"}}},{"parameters":{"resource":"repository","operation":"get","owner":{"__rl":true,"value":"https://github.com/vlad13371337/CODEX","mode":"url"},"repository":{"__rl":true,"value":"CODEX","mode":"list","cachedResultName":"CODEX","cachedResultUrl":"https://github.com/vlad13371337/CODEX"}},"type":"n8n-nodes-base.github","typeVersion":1.1,"position":[1088,1040],"id":"5116cd62-4340-4945-8a94-0ecd22d7a859","name":"Get a repository","webhookId":"a7aa257e-2463-4e2e-aee6-66cee38385ec","credentials":{"githubApi":{"id":"yPwti6pBURNZJcrM","name":"Codex"}}},{"parameters":{"operation":"compress","binaryPropertyName":"={{ Object.keys($binary).join(',') }}","fileName":"website.zip"},"type":"n8n-nodes-base.compression","typeVersion":1.1,"position":[1360,400],"id":"6dd04bfd-97ef-448b-899f-70e8da6cb3c6","name":"Compression"},{"parameters":{"batchSize":"=#!/bin/bash\n\n# –°—Ç–≤–æ—Ä—é—î–º–æ –ø–∞–ø–∫—É —è–∫—â–æ –Ω–µ–º–∞—î\nFOLDER=\"/tmp/website_build\"\nmkdir -p \"$FOLDER\"\n\n# –ó–∞–ø–∏—Å—É—î–º–æ —Ñ–∞–π–ª\ncat > \"$FOLDER/{{$json.path}}\" << 'ENDOFFILE'\n{{$json.content}}\nENDOFFILE\n\necho \"Created: {{$json.path}}\"\n","options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[272,-128],"id":"2daeea86-d610-42b9-a782-555b54902cce","name":"Loop Over Items"},{"parameters":{},"type":"n8n-nodes-base.noOp","name":"Replace Me","typeVersion":1,"position":[592,-112],"id":"8f3f57fa-4b82-49ef-bd43-ace945abecd5"},{"parameters":{"command":"=#!/bin/bash\n\n# –®–ª—è—Ö –¥–æ —Ñ–∞–π–ª—É –≤ AI Drive\nFILE_PATH=\"{{$json.output}}\"\n\n# –í–∏–≤–æ–¥–∏–º–æ —à–ª—è—Ö –¥–ª—è –¥–æ—Å—Ç—É–ø—É\necho \"File saved: $FILE_PATH\"\necho \"Access via AI Drive web interface\"\n\n# –í–∏–≤–æ–¥–∏–º–æ –¥–ª—è n8n\necho \"$FILE_PATH\"\n"},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[816,128],"id":"b909915f-2406-43c7-b894-ce071340b1e8","name":"Bash \"Get AI Drive URL\""},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[64,-80],"id":"5cbcf037-6bd6-4572-b5ea-ae443823a1b2","name":"Aggregate"},{"parameters":{"jsCode":"// –û—Ç—Ä–∏–º—É—î–º–æ —Ç–µ–∫—Å—Ç –∑ –ü–ï–†–®–û–á –Ω–æ–¥–∏ Telegram (—è–∫–∞ –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è)\nconst telegramText = $('Telegram Trigger').item.json.message.text;\n\n// –û—Ç—Ä–∏–º—É—î–º–æ –≤—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ\nconst inputData = $input.all();\n\n// –û–±—Ä–æ–±–ª—è—î–º–æ –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç\nconst output = inputData.map(item => {\n  // –í–∏—Ç—è–≥—É—î–º–æ —Ç–µ–∫—Å—Ç –∑ —Ä—ñ–∑–Ω–∏—Ö –º–æ–∂–ª–∏–≤–∏—Ö –¥–∂–µ—Ä–µ–ª\n  // –ü–†–Ü–û–†–ò–¢–ï–¢: —Å–ø–æ—á–∞—Ç–∫—É Telegram Trigger (–ø–µ—Ä—à–∞ –Ω–æ–¥–∞), –ø–æ—Ç—ñ–º –∑ –ø–æ—Ç–æ—á–Ω–æ–≥–æ item\n  let text = telegramText || \n             item.json.message?.text || \n             item.json.text || \n             item.json.query || \n             item.json.prompt || \n             '';\n  \n  // –ù–æ—Ä–º–∞–ª—ñ–∑—É—î–º–æ —Ç–µ–∫—Å—Ç:\n  // 1. –í–∏–¥–∞–ª—è—î–º–æ –∑–∞–π–≤—ñ –ø—Ä–æ–±—ñ–ª–∏ —Ç–∞ —Ç–∞–±—É–ª—è—Ü—ñ—ó\n  // 2. –ó–∞–º—ñ–Ω—é—î–º–æ –ø–µ—Ä–µ–Ω–æ—Å–∏ —Ä—è–¥–∫—ñ–≤ –Ω–∞ –ø—Ä–æ–±—ñ–ª–∏\n  // 3. –ü—Ä–∏–±–∏—Ä–∞—î–º–æ –º–Ω–æ–∂–∏–Ω–Ω—ñ –ø—Ä–æ–±—ñ–ª–∏\n  const normalizedText = text\n    .replace(/\\r\\n/g, ' ')     // Windows –ø–µ—Ä–µ–Ω–æ—Å–∏ ‚Üí –ø—Ä–æ–±—ñ–ª\n    .replace(/\\n/g, ' ')       // Unix –ø–µ—Ä–µ–Ω–æ—Å–∏ ‚Üí –ø—Ä–æ–±—ñ–ª\n    .replace(/\\r/g, ' ')       // Mac –ø–µ—Ä–µ–Ω–æ—Å–∏ ‚Üí –ø—Ä–æ–±—ñ–ª\n    .replace(/\\t/g, ' ')       // –¢–∞–±—É–ª—è—Ü—ñ—ó ‚Üí –ø—Ä–æ–±—ñ–ª\n    .replace(/\\s+/g, ' ')      // –ú–Ω–æ–∂–∏–Ω–Ω—ñ –ø—Ä–æ–±—ñ–ª–∏ ‚Üí –æ–¥–∏–Ω –ø—Ä–æ–±—ñ–ª\n    .trim();                    // –í–∏–¥–∞–ª—è—î–º–æ –ø—Ä–æ–±—ñ–ª–∏ –Ω–∞ –ø–æ—á–∞—Ç–∫—É/–∫—ñ–Ω—Ü—ñ\n  \n  console.log(\"=== TEXT NORMALIZER ===\");\n  console.log(\"Telegram Text (1st node):\", telegramText);\n  console.log(\"Original:\", text);\n  console.log(\"Normalized:\", normalizedText);\n  \n  // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –æ–±—Ä–æ–±–ª–µ–Ω—ñ –¥–∞–Ω—ñ\n  return {\n    json: {\n      ...item.json,\n      message: {\n        ...item.json.message,\n        text: normalizedText\n      },\n      text: normalizedText,\n      query: normalizedText,\n      prompt: normalizedText,\n      normalized_text: normalizedText, // –¥–æ–¥–∞—Ç–∫–æ–≤–µ –ø–æ–ª–µ\n      telegram_source: telegramText    // –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª –∑ Telegram\n    }\n  };\n});\n\nreturn output;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-400,640],"id":"6a495264-f026-432f-9f37-bf8cd00300df","name":"Code in JavaScript1"},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"=üöÄ <b>–í–∑—è–≤ –≤ —Ä–æ–±–æ—Ç—É!</b>  \n‚è±Ô∏è <b>–û—á—ñ–∫—É–≤–∞–Ω–∏–π —á–∞—Å: 10-15 —Ö–≤–∏–ª–∏–Ω</b>  \n<b>–ó–∞—á–µ–∫–∞–π—Ç–µ, –±—É–¥—å –ª–∞—Å–∫–∞</b> ‚òï","additionalFields":{"parse_mode":"HTML"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[-528,432],"id":"07437ba8-e5f9-4246-a55d-62f0b5c199ae","name":"Send a text message","webhookId":"fe8c575b-d26e-49de-b59d-8433c218a88b","notesInFlow":true,"credentials":{"telegramApi":{"id":"JTxYpt4Hdl7KKsLn","name":"@popalamarama_bot"}}},{"parameters":{"chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"‚úÖ <b>–ï—Ç–∞–ø 1/3 –∑–∞–≤–µ—Ä—à–µ–Ω–æ</b> üìù <b>–°—Ç–≤–æ—Ä–∏–≤ –ø—Ä–æ–º–ø—Ç –¥–ª—è —Å–∞–π—Ç—É</b>   ‚è≥ <b>–ü–æ—á–∏–Ω–∞—é –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é...</b>","additionalFields":{"parse_mode":"HTML"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[160,1040],"id":"9f77a09f-dfda-4968-8062-9448696dff22","name":"Send a text message1","webhookId":"bded5756-6d44-47a9-90ad-ccbef3c39226","notesInFlow":true,"credentials":{"telegramApi":{"id":"xWrzOPc7BVVkxCQ1","name":"CODEX"}}},{"parameters":{"chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"‚úÖ <b>–ï—Ç–∞–ø 2/3</b> üé® <b>–ì–µ–Ω–µ—Ä—É—é HTML —Å—Ç–æ—Ä—ñ–Ω–∫–∏...</b> üíª <b>–¶–µ –∑–∞–π–º–µ 10-15 —Ö–≤–∏–ª–∏–Ω</b>","additionalFields":{"parse_mode":"HTML"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[304,1040],"id":"a0f4844d-ae0f-43e0-bf9d-9a5e7d92f85f","name":"Send a text message2","webhookId":"bded5756-6d44-47a9-90ad-ccbef3c39226","retryOnFail":false,"executeOnce":false,"notesInFlow":true,"credentials":{"telegramApi":{"id":"xWrzOPc7BVVkxCQ1","name":"CODEX"}}},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/responses","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":" application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"gpt-5-codex\",\n  \"input\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"You are a web architect. Create a JSON structure for a multi-page website with 8 pages: index.html, about.html, services.html, portfolio.html, team.html, contact.html, legal.html, faq.html. Return ONLY valid JSON with this structure: {\\\"pages\\\": [{\\\"filename\\\": \\\"index.html\\\", \\\"title\\\": \\\"...\\\", \\\"description\\\": \\\"...\\\"}]}\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"{{ $json.message.text }}\"\n    }\n  ]\n}","options":{"timeout":2500000}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-256,432],"id":"616fd5db-ab43-4a41-b758-ccba34814bc6","name":"–ù–û–î–ê 1","executeOnce":false,"alwaysOutputData":false,"credentials":{"httpHeaderAuth":{"id":"akk2Sns1ZGHCFsnS","name":"CODEX-ASS"}}},{"parameters":{"jsCode":"// –ù–û–î–ê 2: –í–∏—Ç—è–≥—É—î–º–æ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–∞–π—Ç—É –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ GPT-5 Codex\n\nconst response = items[0].json;\n\n// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞\nif (!response || !response.output) {\n  throw new Error('–ù–û–î–ê 2: –ù–µ–≤–∞–ª—ñ–¥–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ GPT-5 Codex');\n}\n\n// –í–∏—Ç—è–≥—É—î–º–æ –∫–æ–Ω—Ç–µ–Ω—Ç (Responses API –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î \"output\" –∑–∞–º—ñ—Å—Ç—å \"choices\")\nlet content = response.output;\n\n// –Ø–∫—â–æ content - –æ–±'—î–∫—Ç, –∫–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –≤ JSON —Ä—è–¥–æ–∫\nif (typeof content === 'object') {\n  content = JSON.stringify(content);\n}\n\n// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —â–æ content —Ç–µ–ø–µ—Ä —Ä—è–¥–æ–∫\nif (typeof content !== 'string') {\n  throw new Error('–ù–û–î–ê 2: content –Ω–µ —î —Ä—è–¥–∫–æ–º. –¢–∏–ø: ' + typeof content);\n}\n\n// –í–∏–¥–∞–ª—è—î–º–æ markdown –±–ª–æ–∫–∏ ```json...```\nconst cleaned = content.replace(/```json\\n?|\\n?```/g, '').trim();\n\n// üî• –î–ò–ù–ê–ú–Ü–ß–ù–ò–ô originalPrompt –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –Ω–æ–¥–∏\nconst originalPrompt = $('Code in JavaScript1').first().json.prompt;\n\nconsole.log('‚úÖ –ù–û–î–ê 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∞–π—Ç—É –æ—Ç—Ä–∏–º–∞–Ω–∞');\nconsole.log('üìÑ JSON –¥–æ–≤–∂–∏–Ω–∞:', cleaned.length);\nconsole.log('üìù Original Prompt:', originalPrompt);\n\nreturn [{\n  json: {\n    structure: cleaned,\n    originalPrompt: originalPrompt  // üëà –ë–µ—Ä–µ–º–æ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –Ω–æ–¥–∏\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-96,624],"id":"e005bc96-7482-47e3-b8c0-3ea0e7f3a6c0","name":"–ù–û–î–ê 2"},{"parameters":{"jsCode":"// –ù–û–î–ê 3: –ó–Ω–∞—Ö–æ–¥–∏–º–æ index.html –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ —ñ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –≤—Å—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏\n\nconst inputData = items[0].json.structure;\n\nif (!inputData) {\n  throw new Error('–ù–û–î–ê 3: structure –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –ü–µ—Ä–µ–≤—ñ—Ä –ù–û–î–£ 2!');\n}\n\nconsole.log('üìÑ –ù–û–î–ê 3: inputData –æ—Ç—Ä–∏–º–∞–Ω–æ, –¥–æ–≤–∂–∏–Ω–∞:', inputData.length);\n\n// –ü–∞—Ä—Å–∏–º–æ JSON\nlet structure;\ntry {\n  structure = typeof inputData === 'string' \n    ? JSON.parse(inputData) \n    : inputData;\n} catch (error) {\n  console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥—É JSON:', error.message);\n  throw new Error('–ù–û–î–ê 3: –ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π JSON –≤—ñ–¥ Codex API');\n}\n\nconsole.log('üîç –¢–∏–ø structure:', typeof structure);\nconsole.log('üîç –ö–ª—é—á—ñ structure:', Object.keys(structure));\n\n// üî• –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø: –í–∏—Ç—è–≥—É—î–º–æ pages –∑ —Ä—ñ–∑–Ω–∏—Ö –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏\nlet pages = [];\n\n// –í–∞—Ä—ñ–∞–Ω—Ç 1: –ü—Ä—è–º–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ {pages: [...]}\nif (structure.pages && Array.isArray(structure.pages)) {\n  pages = structure.pages;\n  console.log('‚úÖ –ó–Ω–∞–π–¥–µ–Ω–æ pages –Ω–∞–ø—Ä—è–º—É –≤ structure.pages');\n}\n// –í–∞—Ä—ñ–∞–Ω—Ç 2: –ú–∞—Å–∏–≤ –∑ API response –æ–±'—î–∫—Ç–∞–º–∏\nelse if (Array.isArray(structure)) {\n  console.log('üîç structure —î –º–∞—Å–∏–≤–æ–º, —à—É–∫–∞—é pages –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ...');\n  \n  // –®—É–∫–∞—î–º–æ –æ–±'—î–∫—Ç –∑ type: \"message\"\n  const messageObj = structure.find(item => \n    item.type === 'message' && \n    item.content && \n    Array.isArray(item.content)\n  );\n  \n  if (messageObj && messageObj.content[0] && messageObj.content[0].text) {\n    // –ü–∞—Ä—Å–∏–º–æ JSON –∑ text –ø–æ–ª—è\n    try {\n      const innerData = JSON.parse(messageObj.content[0].text);\n      if (innerData.pages && Array.isArray(innerData.pages)) {\n        pages = innerData.pages;\n        console.log('‚úÖ –í–∏—Ç—è–≥–Ω—É—Ç–æ pages –∑ message.content[0].text');\n      }\n    } catch (e) {\n      console.error('‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è —Ä–æ–∑–ø–∞—Ä—Å–∏—Ç–∏ text:', e.message);\n    }\n  }\n  \n  // –Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π—à–ª–∏ - —Ñ—ñ–ª—å—Ç—Ä—É—î–º–æ —Ç—ñ–ª—å–∫–∏ –≤–∞–ª—ñ–¥–Ω—ñ –æ–±'—î–∫—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–æ–∫\n  if (pages.length === 0) {\n    pages = structure.filter(item => \n      item.filename && \n      typeof item.filename === 'string' &&\n      !item.id &&  // –í–∏–∫–ª—é—á–∞—î–º–æ API response –æ–±'—î–∫—Ç–∏\n      !item.type\n    );\n    console.log('‚úÖ –í—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω–æ –≤–∞–ª—ñ–¥–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑ –º–∞—Å–∏–≤—É');\n  }\n}\n\n// –§—ñ–Ω–∞–ª—å–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è\npages = pages.filter(page => \n  page.filename && \n  typeof page.filename === 'string' &&\n  page.title &&\n  typeof page.title === 'string'\n);\n\nconsole.log('üìÑ –ù–û–î–ê 3: –ó–Ω–∞–π–¥–µ–Ω–æ –í–ê–õ–Ü–î–ù–ò–• —Å—Ç–æ—Ä—ñ–Ω–æ–∫:', pages.length);\n\nif (pages.length === 0) {\n  throw new Error('–ù–û–î–ê 3: –ù–µ –≤–¥–∞–ª–æ—Å—è –∑–Ω–∞–π—Ç–∏ –∂–æ–¥–Ω–æ—ó –≤–∞–ª—ñ–¥–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏!');\n}\n\nconsole.log('üìã –°–ø–∏—Å–æ–∫ —Å—Ç–æ—Ä—ñ–Ω–æ–∫:');\npages.forEach(p => console.log('   -', p.filename, '|', p.title));\n\n// –ó–Ω–∞—Ö–æ–¥–∏–º–æ index.html\nlet indexPage = pages.find(p => p.filename === 'index.html');\n\n// –Ø–∫—â–æ index.html –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ - —Å—Ç–≤–æ—Ä—é—î–º–æ\nif (!indexPage) {\n  console.warn('‚ö†Ô∏è index.html –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ, —Å—Ç–≤–æ—Ä—é—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ');\n  indexPage = {\n    filename: 'index.html',\n    title: pages[0]?.title || '–ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞',\n    description: pages[0]?.description || '–ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ —Å–∞–π—Ç—É'\n  };\n  pages.unshift(indexPage);\n}\n\nconsole.log('‚úÖ –ù–û–î–ê 3: index.html –≥–æ—Ç–æ–≤–∏–π -', indexPage.title);\nconsole.log('üìä –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–æ—Ä—ñ–Ω–æ–∫:', pages.length);\n\nreturn [{\n  json: {\n    indexPage: indexPage,\n    allPages: pages,\n    originalPrompt: items[0].json.originalPrompt\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[48,432],"id":"bb347fd4-ba60-4e75-99e8-33cbeea5f5df","name":"–ù–û–î–ê 3"},{"parameters":{"jsCode":"// –ù–û–î–ê 4: –ü–∞—Ä—Å–∏–Ω–≥ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ HTTP Request + –ø–µ—Ä–µ–¥–∞—á–∞ allPages\n\nconst response = items[0].json;\n\n// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ (Responses API –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î \"output\" –∑–∞–º—ñ—Å—Ç—å \"choices\")\nif (!response || !response.output) {\n  throw new Error('–ù–û–î–ê 4: –ù–µ–≤–∞–ª—ñ–¥–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ GPT-5 Codex');\n}\n\n// –í–∏—Ç—è–≥—É—î–º–æ HTML –∑ –ø–æ–ª—è \"output\"\nlet htmlContent = response.output;\n\n// –Ø–∫—â–æ output - –æ–±'—î–∫—Ç, –∫–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –≤ —Ä—è–¥–æ–∫\nif (typeof htmlContent === 'object') {\n  htmlContent = JSON.stringify(htmlContent);\n}\n\n// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —â–æ —Ü–µ —Ä—è–¥–æ–∫\nif (typeof htmlContent !== 'string') {\n  throw new Error('–ù–û–î–ê 4: HTML –Ω–µ —î —Ä—è–¥–∫–æ–º. –¢–∏–ø: ' + typeof htmlContent);\n}\n\n// –í–∏–¥–∞–ª—è—î–º–æ markdown –±–ª–æ–∫–∏ ```html...```\nconst cleanedHTML = htmlContent.replace(/```html\\n?|\\n?```/g, '').trim();\n\nconsole.log('‚úÖ –ù–û–î–ê 4: index.html –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ');\nconsole.log('üìÑ HTML –¥–æ–≤–∂–∏–Ω–∞:', cleanedHTML.length);\n\n// ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –û—Ç—Ä–∏–º—É—î–º–æ allPages –∑ –ù–û–î–ò 3\nconst node3Data = $node[\"–ù–û–î–ê 3\"];\n\nif (!node3Data || !node3Data.json) {\n  throw new Error('–ù–û–î–ê 4: –ù–µ –º–æ–∂—É –∑–Ω–∞–π—Ç–∏ –ù–û–î–£ 3!');\n}\n\nconsole.log('‚úÖ allPages –æ—Ç—Ä–∏–º–∞–Ω–æ –∑ –ù–û–î–ò 3:', node3Data.json.allPages.length, '—Å—Ç–æ—Ä—ñ–Ω–æ–∫');\n\n// ‚úÖ –ü–ï–†–ï–î–ê–Ñ–ú–û –í–°–ï –î–ê–õ–Ü\nreturn [{\n  json: {\n    indexHTML: cleanedHTML,\n    allPages: node3Data.json.allPages,              // ‚Üê –¶–ï –ú–ê–Ñ –ë–£–¢–ò!\n    originalPrompt: node3Data.json.originalPrompt   // ‚Üê –Ü –¶–ï!\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[320,400],"id":"87c42676-ab6f-4944-8804-07a31dbcf738","name":"–ù–û–î–ê 4"},{"parameters":{"jsCode":"// –ù–û–î–ê 5: –í–∏—Ç—è–≥—Ç–∏ CSS –∑ index.html\n\nconst html = items[0].json.indexHTML;\n\nif (!html) {\n  throw new Error('–ù–û–î–ê 5: indexHTML –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ');\n}\n\nconsole.log('üìÑ –ù–û–î–ê 5: indexHTML –æ—Ç—Ä–∏–º–∞–Ω–æ, –¥–æ–≤–∂–∏–Ω–∞:', html.length);\n\n// –í–∏—Ç—è–≥—É—î–º–æ CSS\nconst cssMatch = html.match(/<style[^>]*>([\\s\\S]*?)<\\/style>/i);\nconst extractedCSS = cssMatch ? cssMatch[1].trim() : '';\n\nif (!extractedCSS) {\n  console.warn('‚ö†Ô∏è –ù–û–î–ê 5: CSS –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ <style> —Ç–µ–≥–∞—Ö');\n  console.log('üîç –ü–µ—Ä–µ–≤—ñ—Ä—è—é –Ω–∞—è–≤–Ω—ñ—Å—Ç—å inline —Å—Ç–∏–ª—ñ–≤ –∞–±–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å CSS...');\n  \n  // –Ø–∫—â–æ CSS –Ω–µ–º–∞—î - –º–æ–∂–Ω–∞ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –∑ –ø–æ—Ä–æ–∂–Ω—ñ–º CSS\n  // throw new Error('–ù–û–î–ê 5: CSS –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ index.html');\n}\n\nconsole.log('‚úÖ –ù–û–î–ê 5: CSS –≤–∏—Ç—è–≥–Ω—É—Ç–æ -', extractedCSS.length, '—Å–∏–º–≤–æ–ª—ñ–≤');\n\n// ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –û—Ç—Ä–∏–º—É—î–º–æ allPages –∑ –ù–û–î–ò 4\nlet allPages = items[0].json.allPages;\nlet originalPrompt = items[0].json.originalPrompt;\n\n// –Ø–∫—â–æ –Ω–µ–º–∞—î - –±–µ—Ä–µ–º–æ –∑ –ù–û–î–ò 3 –Ω–∞–ø—Ä—è–º—É\nif (!allPages) {\n  console.log('‚ö†Ô∏è allPages –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ items. –®—É–∫–∞—é –≤ –ù–û–î–Ü 3...');\n  \n  const node3Data = $node[\"–ù–û–î–ê 3\"];\n  if (node3Data && node3Data.json) {\n    allPages = node3Data.json.allPages;\n    originalPrompt = node3Data.json.originalPrompt;\n    console.log('‚úÖ allPages –∑–Ω–∞–π–¥–µ–Ω–æ –≤ –ù–û–î–Ü 3:', allPages.length, '—Å—Ç–æ—Ä—ñ–Ω–æ–∫');\n  }\n}\n\n// –û—Å—Ç–∞–Ω–Ω—ñ–π –≤–∞—Ä—ñ–∞–Ω—Ç - —Ö–∞—Ä–¥–∫–æ–¥\nif (!allPages || !Array.isArray(allPages)) {\n  console.log('‚ö†Ô∏è allPages –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –Ω—ñ–¥–µ. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é —Ö–∞—Ä–¥–∫–æ–¥.');\n  \n  allPages = [\n    {filename: 'index.html', title: '–ì–æ–ª–æ–≤–Ω–∞', description: '–ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞'},\n    {filename: 'about.html', title: '–ü—Ä–æ –Ω–∞—Å', description: '–ü—Ä–æ –∫–æ–º–ø–∞–Ω—ñ—é YBK'},\n    {filename: 'services.html', title: '–ü–æ—Å–ª—É–≥–∏', description: '–ù–∞—à—ñ –ø–æ—Å–ª—É–≥–∏'},\n    {filename: 'portfolio.html', title: '–ü–æ—Ä—Ç—Ñ–æ–ª—ñ–æ', description: '–ù–∞—à—ñ —Ä–æ–±–æ—Ç–∏'},\n    {filename: 'team.html', title: '–ö–æ–º–∞–Ω–¥–∞', description: '–ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞'},\n    {filename: 'contact.html', title: '–ö–æ–Ω—Ç–∞–∫—Ç–∏', description: '–ó–≤\\'—è–∑–∞—Ç–∏—Å—è –∑ –Ω–∞–º–∏'},\n    {filename: 'legal.html', title: '–ü—Ä–∞–≤–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è', description: 'Legal'},\n    {filename: 'faq.html', title: 'FAQ', description: '–ß–∞—Å—Ç—ñ –ø–∏—Ç–∞–Ω–Ω—è'}\n  ];\n  originalPrompt = '–†–µ–∫–ª–∞–º–Ω–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ YBK –≤ –•–∞—Ä–∫–æ–≤—ñ';\n}\n\n// –§—ñ–ª—å—Ç—Ä—É—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (–±–µ–∑ index.html)\nconst remainingPages = allPages.filter(p => p.filename !== 'index.html');\n\nconsole.log('üìÑ –ù–û–î–ê 5: –°—Ç–æ—Ä—ñ–Ω–æ–∫ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó:', remainingPages.length);\nremainingPages.forEach(p => console.log('   -', p.filename));\n\n// ‚úÖ –ü–ï–†–ï–î–ê–Ñ–ú–û –í–°–ï –î–ê–õ–Ü\nreturn [{\n  json: {\n    unifiedCSS: extractedCSS,\n    indexHTML: html,\n    remainingPages: remainingPages,\n    allPages: allPages,  // ‚Üê –ù–∞ –≤—Å—è–∫ –≤–∏–ø–∞–¥–æ–∫\n    originalPrompt: originalPrompt\n  }\n}];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[448,608],"id":"f0270bf3-3744-4d6d-b8c0-22afb8f9acec","name":"–ù–û–î–ê 5"},{"parameters":{"jsCode":"// –ù–û–î–ê 6: –í–∏—Ç—è–≥—É—î–º–æ CSS –∑ index.html –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ —ñ–Ω—à–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö\n\nconst html = items[0].json.indexHTML;\n\nif (!html) {\n  throw new Error('–ù–û–î–ê 6: indexHTML –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –ü–µ—Ä–µ–≤—ñ—Ä –ù–û–î–£ 5!');\n}\n\nconsole.log('üìÑ –ù–û–î–ê 6: indexHTML –æ—Ç—Ä–∏–º–∞–Ω–æ, –¥–æ–≤–∂–∏–Ω–∞:', html.length);\n\n// –í–∏—Ç—è–≥—É—î–º–æ CSS –∑ <style>...</style>\nconst cssMatch = html.match(/<style[^>]*>([\\s\\S]*?)<\\/style>/i);\nconst extractedCSS = cssMatch ? cssMatch[1].trim() : '';\n\n// –ú'—è–∫–∞ –æ–±—Ä–æ–±–∫–∞ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ CSS (Codex –º–æ–∂–µ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –±–µ–∑ <style> —Ç–µ–≥—ñ–≤)\nif (!extractedCSS) {\n  console.warn('‚ö†Ô∏è –ù–û–î–ê 6: CSS –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ <style> —Ç–µ–≥–∞—Ö');\n  console.log('üîç –ú–æ–∂–ª–∏–≤–æ HTML –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î inline —Å—Ç–∏–ª—ñ –∞–±–æ –∑–æ–≤–Ω—ñ—à–Ω—ñ CSS —Ñ–∞–π–ª–∏');\n  \n  // –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ: –º–æ–∂–Ω–∞ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –∑ –ø–æ—Ä–æ–∂–Ω—ñ–º CSS\n  // throw new Error('–ù–û–î–ê 6: CSS –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ index.html!');\n}\n\nconsole.log('‚úÖ –ù–û–î–ê 6: CSS –≤–∏—Ç—è–≥–Ω—É—Ç–æ -', extractedCSS.length, '—Å–∏–º–≤–æ–ª—ñ–≤');\n\n// –û—Ç—Ä–∏–º—É—î–º–æ allPages (–∑ fallback –ª–æ–≥—ñ–∫–æ—é)\nlet allPages = items[0].json.allPages;\nlet originalPrompt = items[0].json.originalPrompt;\n\n// Fallback 1: –Ø–∫—â–æ –Ω–µ–º–∞—î –≤ items[0] - —à—É–∫–∞—î–º–æ –≤ –ù–û–î–Ü 5\nif (!allPages || !Array.isArray(allPages)) {\n  console.log('‚ö†Ô∏è allPages –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ items[0]. –®—É–∫–∞—é –≤ –ù–û–î–Ü 5...');\n  \n  const node5Data = $node[\"–ù–û–î–ê 5\"];\n  if (node5Data && node5Data.json) {\n    allPages = node5Data.json.allPages;\n    originalPrompt = node5Data.json.originalPrompt;\n    console.log('‚úÖ allPages –∑–Ω–∞–π–¥–µ–Ω–æ –≤ –ù–û–î–Ü 5:', allPages.length, '—Å—Ç–æ—Ä—ñ–Ω–æ–∫');\n  }\n}\n\n// Fallback 2: –Ø–∫—â–æ –≤—Å–µ —â–µ –Ω–µ–º–∞—î - —à—É–∫–∞—î–º–æ –≤ –ù–û–î–Ü 3\nif (!allPages || !Array.isArray(allPages)) {\n  console.log('‚ö†Ô∏è allPages –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ –ù–û–î–Ü 5. –®—É–∫–∞—é –≤ –ù–û–î–Ü 3...');\n  \n  const node3Data = $node[\"–ù–û–î–ê 3\"];\n  if (node3Data && node3Data.json) {\n    allPages = node3Data.json.allPages;\n    originalPrompt = node3Data.json.originalPrompt;\n    console.log('‚úÖ allPages –∑–Ω–∞–π–¥–µ–Ω–æ –≤ –ù–û–î–Ü 3:', allPages.length, '—Å—Ç–æ—Ä—ñ–Ω–æ–∫');\n  }\n}\n\n// Fallback 3: –û—Å—Ç–∞–Ω–Ω—ñ–π –≤–∞—Ä—ñ–∞–Ω—Ç - —Ö–∞—Ä–¥–∫–æ–¥\nif (!allPages || !Array.isArray(allPages)) {\n  console.log('‚ö†Ô∏è allPages –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –Ω—ñ–¥–µ. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é —Ö–∞—Ä–¥–∫–æ–¥.');\n  \n  allPages = [\n    {filename: 'index.html', title: '–ì–æ–ª–æ–≤–Ω–∞', description: '–ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞'},\n    {filename: 'about.html', title: '–ü—Ä–æ –Ω–∞—Å', description: '–ü—Ä–æ –∫–æ–º–ø–∞–Ω—ñ—é'},\n    {filename: 'services.html', title: '–ü–æ—Å–ª—É–≥–∏', description: '–ù–∞—à—ñ –ø–æ—Å–ª—É–≥–∏'},\n    {filename: 'portfolio.html', title: '–ü–æ—Ä—Ç—Ñ–æ–ª—ñ–æ', description: '–ù–∞—à—ñ —Ä–æ–±–æ—Ç–∏'},\n    {filename: 'team.html', title: '–ö–æ–º–∞–Ω–¥–∞', description: '–ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞'},\n    {filename: 'contact.html', title: '–ö–æ–Ω—Ç–∞–∫—Ç–∏', description: '–ó–≤\\'—è–∑–∞—Ç–∏—Å—è –∑ –Ω–∞–º–∏'},\n    {filename: 'legal.html', title: '–ü—Ä–∞–≤–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è', description: 'Legal'},\n    {filename: 'faq.html', title: 'FAQ', description: '–ß–∞—Å—Ç—ñ –ø–∏—Ç–∞–Ω–Ω—è'}\n  ];\n  originalPrompt = originalPrompt || '–ë–∞–≥–∞—Ç–æ—Å—Ç–æ—Ä—ñ–Ω–∫–æ–≤–∏–π –≤–µ–±-—Å–∞–π—Ç';\n}\n\n// –§—ñ–ª—å—Ç—Ä—É—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (–±–µ–∑ index.html)\nconst remainingPages = allPages.filter(p => \n  p.filename !== 'index.html' && \n  p.filename !== undefined\n);\n\nconsole.log('üìÑ –ù–û–î–ê 6: –°—Ç–æ—Ä—ñ–Ω–æ–∫ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó:', remainingPages.length);\nremainingPages.forEach(p => console.log('   -', p.filename, '-', p.title));\n\n// –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–µ—Ä–µ–¥ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è–º\nif (remainingPages.length === 0) {\n  console.warn('‚ö†Ô∏è –ù–û–î–ê 6: –ù–µ–º–∞—î —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó (–∫—Ä—ñ–º index.html)!');\n}\n\nreturn [{\n  json: {\n    unifiedCSS: extractedCSS,\n    indexHTML: html,\n    remainingPages: remainingPages,\n    allPages: allPages,  // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–æ–≤–Ω–∏–π —Å–ø–∏—Å–æ–∫\n    originalPrompt: originalPrompt\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[560,400],"id":"61ceab94-eadb-4e4e-acdb-b2e5dc71821f","name":"–ù–û–î–ê 6"},{"parameters":{"jsCode":"// –ù–û–î–ê 7: –°—Ç–≤–æ—Ä—é—î–º–æ –æ–∫—Ä–µ–º–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –∫–æ–∂–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑ CSS\n\nconst css = items[0].json.unifiedCSS;\nconst pages = items[0].json.remainingPages;\nconst prompt = items[0].json.originalPrompt;\n\n// –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö\nif (!pages || !Array.isArray(pages)) {\n  throw new Error('–ù–û–î–ê 7: remainingPages –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∞–±–æ –Ω–µ —î –º–∞—Å–∏–≤–æ–º');\n}\n\nif (pages.length === 0) {\n  console.warn('‚ö†Ô∏è –ù–û–î–ê 7: –ù–µ–º–∞—î —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –¥–ª—è –æ–±—Ä–æ–±–∫–∏!');\n  return [{\n    json: {\n      error: '–ù–µ–º–∞—î —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó',\n      unifiedCSS: css || '',\n      originalPrompt: prompt || ''\n    }\n  }];\n}\n\nconsole.log('üìù –ù–û–î–ê 7: –°—Ç–≤–æ—Ä—é—î–º–æ', pages.length, '–ø—Ä–æ–º–ø—Ç—ñ–≤ –¥–ª—è Codex API');\nconsole.log('üìÑ CSS –¥–æ–≤–∂–∏–Ω–∞:', css ? css.length : 0, '—Å–∏–º–≤–æ–ª—ñ–≤');\nconsole.log('üìù Original Prompt:', prompt);\n\n// –°—Ç–≤–æ—Ä—é—î–º–æ –æ–∫—Ä–µ–º–∏–π item –¥–ª—è –∫–æ–∂–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏\nreturn pages.map((page, index) => {\n  console.log(`   ‚úÖ [${index + 1}/${pages.length}]`, page.filename, '-', page.title);\n  \n  // –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–∫–∏\n  const filename = page.filename || `page-${index + 1}.html`;\n  const title = page.title || `–°—Ç–æ—Ä—ñ–Ω–∫–∞ ${index + 1}`;\n  const description = page.description || `–û–ø–∏—Å —Å—Ç–æ—Ä—ñ–Ω–∫–∏ ${filename}`;\n  \n  return {\n    json: {\n      filename: filename,\n      title: title,\n      description: description,\n      unifiedCSS: css || '',\n      originalPrompt: prompt || '–ë–∞–≥–∞—Ç–æ—Å—Ç–æ—Ä—ñ–Ω–∫–æ–≤–∏–π –≤–µ–±-—Å–∞–π—Ç'\n    }\n  };\n});"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[704,640],"id":"04f63cd7-1d19-472d-95d0-21e93ff0f092","name":"–ù–û–î–ê 7"},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/responses","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":" application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"gpt-5-codex\",\n  \"input\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"You are an expert web developer. Create HTML pages that match an existing design. Use the provided CSS exactly as given. Return ONLY the HTML code, no explanations.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"Create {{ $json.filename }} for: {{ $json.originalPrompt }}\\n\\nTitle: {{ $json.title }}\\nDescription: {{ $json.description }}\\n\\n**USE THIS EXACT CSS:**\\n<style>\\n{{ $json.unifiedCSS }}\\n</style>\\n\\nRequirements:\\n- Use the CSS above without changes\\n- Match the design style\\n- Include navigation menu\\n- Create appropriate content\\n- Add footer\"\n    }\n  ]\n}","options":{"timeout":2500000}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[832,400],"id":"484af44f-e873-469e-9359-083f51e8e211","name":"–ù–û–î–ê 8","executeOnce":false,"alwaysOutputData":false,"credentials":{"httpHeaderAuth":{"id":"akk2Sns1ZGHCFsnS","name":"CODEX-ASS"}}},{"parameters":{"jsCode":"// –ù–û–î–ê 9: –ü–∞—Ä—Å–∏–º–æ –≤—Å—ñ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏\n\nconsole.log('üì¶ –ù–û–î–ê 9: –û–±—Ä–æ–±–∫–∞', items.length, '—Å—Ç–æ—Ä—ñ–Ω–æ–∫');\n\n// –û–±—Ä–æ–±–ª—è—î–º–æ –∫–æ–∂–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å Codex\nconst processedPages = items.map((item, index) => {\n  \n  // üî• –°–ü–û–ß–ê–¢–ö–£ –±–µ—Ä–µ–º–æ filename –∑ –û–†–ò–ì–Ü–ù–ê–õ–¨–ù–û–ì–û –ó–ê–ü–ò–¢–£ (–ù–û–î–ê 4)\n  // item.json –º—ñ—Å—Ç–∏—Ç—å –¥–∞–Ω—ñ –∑ –ù–û–î–ò 4: {path: \"index.html\", title: \"Home\", css: \"...\", prompt_for_page: \"...\"}\n  const originalFilename = item.json?.path;\n  \n  console.log(`   üìÑ –û–±—Ä–æ–±–∫–∞ ${index}: –æ—á—ñ–∫—É—î–º–æ ${originalFilename}`);\n  \n  // –í–∏—Ç—è–≥—É—î–º–æ HTML –∫–æ–Ω—Ç–µ–Ω—Ç –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ Codex\n  let htmlContent = null;\n  \n  if (item.json.output && Array.isArray(item.json.output)) {\n    const messageItem = item.json.output.find(o => o.type === 'message');\n    \n    if (messageItem?.content && Array.isArray(messageItem.content)) {\n      const textItem = messageItem.content.find(c => c.type === 'output_text');\n      if (textItem?.text) {\n        htmlContent = textItem.text;\n      }\n    }\n  }\n  \n  if (!htmlContent) {\n    console.log(`   ‚ùå –°—Ç–æ—Ä—ñ–Ω–∫–∞ ${index} (${originalFilename}) - —Ç–µ–∫—Å—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!`);\n    return null;\n  }\n  \n  // –û—á–∏—â–∞—î–º–æ –≤—ñ–¥ markdown\n  let cleaned = htmlContent\n    .replace(/```html\\s*/g, '')\n    .replace(/```\\s*/g, '')\n    .trim();\n  \n  // –Ø–∫—â–æ AI –ø–æ–≤–µ—Ä–Ω—É–ª–∞ JSON {\"path\":\"...\",\"content\":\"...\"}\n  if (cleaned.startsWith('{') && cleaned.includes('\"content\"')) {\n    try {\n      const parsed = JSON.parse(cleaned);\n      cleaned = parsed.content || cleaned;\n      console.log(`   ‚úÖ ${index}: –í–∏—Ç—è–≥–Ω—É—Ç–æ HTML –∑ JSON`);\n    } catch (e) {\n      // –ó–∞–ª–∏—à–∞—î–º–æ —è–∫ —î\n    }\n  }\n  \n  // üî• –í–ò–ö–û–†–ò–°–¢–û–í–£–Ñ–ú–û FILENAME –ó –û–†–ò–ì–Ü–ù–ê–õ–¨–ù–û–ì–û –ó–ê–ü–ò–¢–£!\n  const filename = originalFilename || `page${index}.html`;\n  \n  console.log(`   ‚úÖ ${filename} - ${cleaned.length} —Å–∏–º–≤–æ–ª—ñ–≤`);\n  \n  return {\n    filename: filename,\n    content: cleaned\n  };\n});\n\n// –§—ñ–ª—å—Ç—Ä—É—î–º–æ null\nconst validPages = processedPages.filter(p => p !== null);\n\nconsole.log(`‚úÖ –£—Å–ø—ñ—à–Ω–æ –æ–±—Ä–æ–±–ª–µ–Ω–æ ${validPages.length} –∑ ${items.length} —Å—Ç–æ—Ä—ñ–Ω–æ–∫`);\nconsole.log('üìã –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª—ñ–≤:');\nvalidPages.forEach(p => console.log(`   - ${p.filename}`));\n\nreturn [{\n  json: {\n    generatedPages: validPages\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[960,640],"id":"3d948410-652a-43a8-8b15-c35da2e7aa81","name":"–ù–û–î–ê 9"},{"parameters":{"jsCode":"// –ù–û–î–ê 10: –û–±'—î–¥–Ω—É—î–º–æ –≤—Å—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑ –ù–û–î–ò 9 (–ë–ï–ó –æ–∫—Ä–µ–º–æ–≥–æ index.html)\n\nconsole.log('üèóÔ∏è –ù–û–î–ê 10: –ó–±—ñ—Ä–∫–∞ –≤–µ–±-—Å–∞–π—Ç—É');\n\n// –û—Ç—Ä–∏–º—É—î–º–æ –í–°–Ü —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑ –ù–û–î–ò 9 (–≤–∫–ª—é—á–Ω–æ –∑ index.html)\nconst allPages = items[0].json.generatedPages;\n\nif (!allPages || allPages.length === 0) {\n  throw new Error('–ù–û–î–ê 10: –ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –∑ –ù–û–î–ò 9!');\n}\n\nconsole.log('‚úÖ –ù–û–î–ê 10: –í—Å—å–æ–≥–æ —Å—Ç–æ—Ä—ñ–Ω–æ–∫:', allPages.length);\nallPages.forEach(p => console.log('   -', p.filename));\n\n// –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ —î index.html\nconst hasIndex = allPages.some(p => p.filename === 'index.html');\nif (!hasIndex) {\n  console.log('‚ö†Ô∏è WARNING: index.html –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!');\n}\n\nreturn [{\n  json: {\n    website: {\n      pages: allPages,\n      total: allPages.length\n    }\n  }\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1088,400],"id":"56b05d05-ed38-4cd8-a0ba-043ee1a619c0","name":"–ù–û–î–ê 10"},{"parameters":{"jsCode":"// –ù–û–î–ê 11: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª—ñ–≤ –¥–ª—è Compression (—É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∞ –¥–ª—è DeepSeek —ñ Codex)\n\nconst websiteData = items[0].json.website;\n\nif (!websiteData || !websiteData.pages) {\n  throw new Error('–ù–û–î–ê 11: –ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ website.pages. –ü–µ—Ä–µ–≤—ñ—Ä –ù–û–î–£ 10!');\n}\n\nconsole.log(`üì§ –ù–û–î–ê 11: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ ${websiteData.pages.length} —Ñ–∞–π–ª—ñ–≤ –≤ –û–î–ò–ù item`);\n\nconst binaryData = {};\nconst binaryFieldNames = [];\n\nfor (let i = 0; i < websiteData.pages.length; i++) {\n  const page = websiteData.pages[i];\n  const contentBuffer = Buffer.from(page.content, 'utf-8');\n  const fieldName = `file${i}`;\n  \n  binaryData[fieldName] = {\n    data: contentBuffer.toString('base64'),\n    mimeType: 'text/html',\n    fileName: page.filename  // ‚Üê index.html, about.html, services.html —ñ —Ç.–¥.\n  };\n  \n  binaryFieldNames.push(fieldName);\n  console.log(`   ‚úÖ ${fieldName} ‚Üí ${page.filename}`);\n}\n\nconsole.log(`‚úÖ –ù–û–î–ê 11: Binary fields —Å—Ç–≤–æ—Ä–µ–Ω–æ: ${binaryFieldNames.join(', ')}`);\nconsole.log(`üìã –î–ª—è Compression –Ω–∞–ø–∏—à–∏: ${binaryFieldNames.join(',')}`);\n\nreturn [{\n  json: {\n    totalFiles: websiteData.pages.length,\n    binaryFields: binaryFieldNames.join(',')  // ‚Üê –°–ö–û–ü–Ü–Æ–ô –¶–ï –ó–ù–ê–ß–ï–ù–ù–Ø –í COMPRESSION –ù–û–î–£!\n  },\n  binary: binaryData\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1232,640],"id":"32b0de5d-d005-45f0-8011-f05b1cfc327c","name":"–ù–û–î–ê 11"}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"–ù–û–î–ê 4","type":"main","index":0}]]},"Compression":{"main":[[{"node":"Send a document","type":"main","index":0}]]},"Loop Over Items":{"main":[[],[{"node":"Replace Me","type":"main","index":0}]]},"Replace Me":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Code in JavaScript1":{"main":[[{"node":"–ù–û–î–ê 1","type":"main","index":0}]]},"Send a text message":{"main":[[{"node":"Code in JavaScript1","type":"main","index":0}]]},"Send a text message1":{"main":[[{"node":"Send a text message2","type":"main","index":0}]]},"–ù–û–î–ê 1":{"main":[[{"node":"–ù–û–î–ê 2","type":"main","index":0}]]},"–ù–û–î–ê 2":{"main":[[{"node":"–ù–û–î–ê 3","type":"main","index":0}]]},"–ù–û–î–ê 3":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"–ù–û–î–ê 4":{"main":[[{"node":"–ù–û–î–ê 5","type":"main","index":0}]]},"–ù–û–î–ê 5":{"main":[[{"node":"–ù–û–î–ê 6","type":"main","index":0}]]},"–ù–û–î–ê 6":{"main":[[{"node":"–ù–û–î–ê 7","type":"main","index":0}]]},"–ù–û–î–ê 7":{"main":[[{"node":"–ù–û–î–ê 8","type":"main","index":0}]]},"–ù–û–î–ê 8":{"main":[[{"node":"–ù–û–î–ê 9","type":"main","index":0}]]},"–ù–û–î–ê 9":{"main":[[{"node":"–ù–û–î–ê 10","type":"main","index":0}]]},"–ù–û–î–ê 10":{"main":[[{"node":"–ù–û–î–ê 11","type":"main","index":0}]]},"–ù–û–î–ê 11":{"main":[[{"node":"Compression","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"d119dd90-d3d6-435a-8a28-881976e3baf2","triggerCount":0,"shared":[{"createdAt":"2025-10-22T12:49:49.257Z","updatedAt":"2025-10-22T12:49:49.257Z","role":"workflow:owner","workflowId":"3S4aKdehjHYDz8lA","projectId":"nX80NbTFpj6pvsnR"}],"tags":[]}